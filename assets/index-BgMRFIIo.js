import{r as u,a as A}from"./react-YsBxPMQB.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const p of a.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&n(p)}).observe(document,{childList:!0,subtree:!0});function d(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(t){if(t.ep)return;t.ep=!0;const a=d(t);fetch(t.href,a)}})();var O={exports:{}},S={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k=u,F=Symbol.for("react.element"),R=Symbol.for("react.fragment"),T=Object.prototype.hasOwnProperty,D=k.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,L={key:!0,ref:!0,__self:!0,__source:!0};function _(l,s,d){var n,t={},a=null,p=null;d!==void 0&&(a=""+d),s.key!==void 0&&(a=""+s.key),s.ref!==void 0&&(p=s.ref);for(n in s)T.call(s,n)&&!L.hasOwnProperty(n)&&(t[n]=s[n]);if(l&&l.defaultProps)for(n in s=l.defaultProps,s)t[n]===void 0&&(t[n]=s[n]);return{$$typeof:F,type:l,key:a,ref:p,props:t,_owner:D.current}}S.Fragment=R;S.jsx=_;S.jsxs=_;O.exports=S;var e=O.exports,P,C=A;P=C.createRoot,C.hydrateRoot;const M=({name:l,onDelete:s,onEdit:d})=>{let[n,t]=u.useState(!1),[a,p]=u.useState(l),[g,x]=u.useState(""),[y,j]=u.useState(!1);const v=N=>{p(N.target.value)},b=()=>{d(l,a)?(x(""),j(!1),t(!1)):(x("Names must be unique"),j(!0))};return e.jsxs("div",{className:"account-bubble",children:[y&&e.jsx("div",{className:"error",children:g}),n?e.jsxs("div",{className:"account-bubble-content",children:[e.jsx("input",{type:"text",onChange:v,value:a}),e.jsx("button",{id:"done-button",onClick:()=>b(),children:"Done"})]}):e.jsxs("div",{className:"account-bubble-content",children:[e.jsx("label",{children:l}),e.jsxs("div",{className:"account-bubble-buttons",children:[e.jsx("button",{className:"edit-button",onClick:()=>t(!0),children:"Edit"}),e.jsx("button",{className:"delete-button",onClick:()=>s(l),children:"X"})]})]})]})},$=({updateNames:l})=>{let[s,d]=u.useState([]),[n,t]=u.useState(""),[a,p]=u.useState(!1),[g,x]=u.useState(!1),[y,j]=u.useState("");const v=r=>{t(r.target.value)},b=r=>{const o=s.filter(h=>h!==r);d(o)},N=(r,o)=>{if(s.includes(o)){if(o===r)return d(s),!0}else{let h=[...s];return h[h.indexOf(r)]=o,d(h),!0}return!1};u.useEffect(()=>{l(s)},[s]);const c=()=>{n.trim()!==""?s.includes(n)?(x(!0),j("Names must be unique")):(d([...s,n]),t(""),p(!1),j(""),x(!1)):(x(!0),j("Please enter a name"))};return e.jsxs("div",{className:"account-creation-container",children:[e.jsx("h2",{children:"People"}),g?e.jsx("div",{className:"error",children:y}):e.jsx("label",{children:"Who went on the trip?"}),a?e.jsxs("div",{className:"add-person-container",children:[e.jsx("input",{type:"text",id:"new-account",onChange:v,value:n}),e.jsxs("div",{className:"add-cancel-account-buttons",children:[e.jsx("button",{onClick:c,children:"Add"}),e.jsx("button",{onClick:()=>p(!1),children:"Cancel"})]})]}):e.jsx("div",{className:"add-person-container",children:e.jsx("button",{id:"add-person-button",className:"primary-button",onClick:()=>p(!0),children:"Add Person"})}),s.map((r,o)=>e.jsx(M,{name:r,onDelete:b,onEdit:N},`${r}-${o}`))]})};class E{constructor(s,d){this.getTotal=()=>{let n=0;for(let t of this.payments)n=n+t;return n},this.getFairShare=()=>{const n=this.getTotal(),t=this.payments.length;return n/t},this.getOwed=()=>{const n=[],t=this.getFairShare();for(let a=0;a<this.payments.length;a++){const p=t-this.payments[a];n.push(p)}return n},this.payments=s,this.description=d}}const q=({allAccounts:l,allExpenses:s,updateExpenses:d})=>{const[n,t]=u.useState(""),[a,p]=u.useState(!1),[g,x]=u.useState(""),[y,j]=u.useState(!1),v=(r,o,h)=>{const i=s.map((m,f)=>{if(f===r){const w=[...m.payments];return w[o]=h,new E(w,m.description)}return m});d(i)},b=r=>{t(r.target.value)},N=()=>{if(l.length!==0)if(n.trim()!==""){const r=new Array(l.length).fill(0),o=new E(r,n),h=[...s,o];d(h),t(""),p(!1),x(""),j(!1)}else x("Please add a description"),j(!0);else x("Please add the people who went on the trip"),j(!0)},c=r=>{const o=s.filter((h,i)=>i!==r);d(o),x(""),j(!1)};return e.jsxs("div",{className:"expense-creation-container",children:[e.jsx("h2",{children:"Expenses"}),e.jsxs("div",{className:"expense-creation",children:[e.jsx("div",{children:"What expenses did you have?"}),!a&&e.jsx("button",{id:"add-expense-button",className:"primary-button",onClick:()=>p(!0),children:"Add Expense"}),y&&e.jsx("div",{children:e.jsx("div",{children:g})}),a&&e.jsxs("div",{className:"expense-creation-controls",children:[e.jsx("input",{type:"text",value:n,onChange:b}),e.jsx("button",{onClick:N,children:"Add"}),e.jsx("button",{onClick:()=>p(!1),children:"Cancel"})]})]}),s.map((r,o)=>e.jsxs("div",{className:"expense",children:[e.jsxs("div",{className:"expense-content",children:[e.jsx("div",{children:e.jsx("div",{className:"expense-description",children:r.description})}),e.jsx("div",{className:"expenses-input",children:r.payments.map((h,i)=>e.jsxs("div",{children:[e.jsx("div",{className:"expense-account-name",children:l[i].name}),e.jsx("input",{type:"text",value:h,onChange:m=>v(o,i,Number(m.target.value))})]},i))}),e.jsx("div",{className:"md:w-1/3 text-right",children:e.jsxs("div",{children:["Total: ",r.getTotal()]})})]}),e.jsx("button",{className:"delete-button",onClick:()=>c(o),children:"X"})]},o))]})};class B{constructor(s,d){this.name=s,this.owedAmount=d}}const I=({transactions:l})=>e.jsxs("div",{className:"transaction-container",children:[e.jsx("h2",{children:"Bill"}),e.jsx("ul",{children:l.map((s,d)=>e.jsxs("li",{children:[s.from," owes ",s.amount.toFixed(2)," to ",s.to]},d))})]});function U(){const[l,s]=u.useState([]),[d,n]=u.useState([]),[t,a]=u.useState([]),[p,g]=u.useState([]),[x,y]=u.useState([]),j=c=>{if(c.length<l.length){const r=l.filter(i=>!c.includes(i))[0],o=l.indexOf(r);let h=t.map(i=>{const m=[...i.payments];return m.splice(o,1),new E(m,i.description)});a(h)}s([...c])};u.useEffect(()=>{let c=l.map(o=>new B(o,[])),r=t.map(o=>{let h=Array(c.length).fill(0);for(let i=0;i<Math.min(o.payments.length,c.length);i++)h[i]=o.payments[i];return new E(h,o.description)});a(r),n(c)},[l]);const v=c=>{a(c)},b=()=>{var r;let c=Array(((r=t[0])==null?void 0:r.payments.length)||0).fill(0);for(let o of t){const h=o.getFairShare();for(let i=0;i<o.payments.length;i++)c[i]=c[i]+(h-o.payments[i])}return c},N=()=>{let c=[],r=[];p.forEach((m,f)=>{m>0?c.push({index:f,amount:m}):m<0&&r.push({index:f,amount:-m})}),c.sort((m,f)=>f.amount-m.amount),r.sort((m,f)=>f.amount-m.amount);let o=[],h=0,i=0;for(;h<c.length&&i<r.length;){let m=c[h],f=r[i],w=Math.min(m.amount,f.amount);o.push({from:d[m.index].name,to:d[f.index].name,amount:w}),m.amount=parseFloat((m.amount-w).toFixed(2)),f.amount=parseFloat((f.amount-w).toFixed(2)),Math.abs(m.amount)<.01&&h++,Math.abs(f.amount)<.01&&i++}return o};return u.useEffect(()=>{if(t.length>=1){const c=b();g(c)}else g([])},[t]),u.useEffect(()=>{if(p.length>0){const c=N();y(c)}else y([])},[p]),e.jsxs("div",{className:"app-container",children:[e.jsx($,{updateNames:j}),e.jsx(q,{allAccounts:d,allExpenses:t,updateExpenses:v}),e.jsx(I,{transactions:x})]})}P(document.getElementById("root")).render(e.jsx(u.StrictMode,{children:e.jsx(U,{})}));
//# sourceMappingURL=index-BgMRFIIo.js.map
